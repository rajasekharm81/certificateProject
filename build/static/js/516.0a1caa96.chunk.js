"use strict";(self.webpackChunkodrequest=self.webpackChunkodrequest||[]).push([[516],{8516:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var s=r(4165),n=r(5861),a=r(5671),o=r(3144),i=r(136),c=r(7277),l=r(2791),d=r(7689),u=r(6015),p=r(5017),f=r(7205),g=r(1647),m=r(1508),h=r(4360),x=r(7012),w=r(1677),v=r(8422),y=r(4056),S=r(5627),Z=r(2388),b=r(184),j=(0,h.Z)({palette:{regTextField:{main:"#1173ef",contrastText:"#fff"},success:{main:"#11cb5f",contrastText:"#ffffff"},reset:{main:"#FFE6CC",contrastText:"#D46300"}}}),C=function(e){(0,i.Z)(r,e);var t=(0,c.Z)(r);function r(){var e;(0,a.Z)(this,r);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={enrollmentNo:"",password:"",confirmPassword:"",enrollmentNoErr:!1,passwordErr:!1,confirmPasswordErr:!1,passwordMatched:!0,allDataEntered:!1,otpSent:!1,otpVerifiedSuccessfully:!1,backErr:!1,backErrMsg:"",severity:"",isLoading:!1,alreadyRegistered:!1},e.navigateToSignIn=function(){setTimeout((function(){e.setState({otpVerifiedSuccessfully:!0})}),3e3)},e.reset=function(){e.setState({enrollmentNo:"",password:"",confirmPassword:"",enrollmentNoErr:!1,passwordErr:!1,confirmPasswordErr:!1})},e.callForOtp=(0,n.Z)((0,s.Z)().mark((function t(){var r,n,a,o,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,n=r.password,a=r.enrollmentNo,t.prev=1,o={url:"".concat("https://20.235.87.10/capis/","account/reset-password/"),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:{enrollment:a,new_password:n,confirm_new_password:n}},t.next=5,(0,Z.Z)(o);case 5:i=t.sent,console.log(i),e.setState({otpSent:!0,isLoading:!1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),500===t.t0.response.status?e.setState({isLoading:!1,backErr:!0,backErrMsg:"Unregistered user... Please sign up"}):e.setState({backErr:!0,backErrMsg:"".concat(t.t0.message,"...Please try again"),isLoading:!1,severity:"error"});case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.onSubmit=function(){var t=e.state,r=t.enrollmentNo,s=t.password,n=t.confirmPassword;e.setState({isLoading:!0}),""===r&&e.setState({enrollmentNoErr:!0}),""!==r&&e.setState({enrollmentNoErr:!1}),""===s&&e.setState({passwordErr:!0}),""!==s&&e.setState({passwordErr:!1}),""===n&&e.setState({confirmPasswordErr:!0}),""!==n&&e.setState({confirmPasswordErr:!1}),s===n&&e.setState({passwordMatched:!0}),s!==n&&e.setState({passwordMatched:!1}),""!==r&&s===n&&""!==s&&""!==n?e.setState({allDataEntered:!0},e.callForOtp):e.setState({isLoading:!1})},e.passwordResetForm=function(){var t=e.state,r=t.enrollmentNo,s=t.enrollmentNoErr,n=t.password,a=t.confirmPassword,o=t.passwordErr,i=t.confirmPasswordErr,c=t.passwordMatched;return(0,b.jsxs)(u.Z,{className:"registrationForm",children:[(0,b.jsx)("h1",{style:{padding:"10px"},children:"Reset Password"}),(0,b.jsx)(p.Z,{required:!0,size:"small",id:"reg-father-enroll",label:"Enrollment Number",style:{margin:"10px",width:"90%"},onChange:function(t){return e.setState({enrollmentNo:t.target.value.toUpperCase()})},value:r,error:s}),(0,b.jsx)(p.Z,{required:!0,size:"small",id:"reg-student-password",label:"New Password",style:{margin:"10px",width:"90%"},value:n,onChange:function(t){return e.setState({password:t.target.value})},error:o}),(0,b.jsx)(p.Z,{required:!0,size:"small",id:"reg-student-ConfirmPassword",label:"Confirm Password",style:{margin:"10px",width:"90%"},value:a,onChange:function(t){return e.setState({confirmPassword:t.target.value})},error:i}),c?null:(0,b.jsx)("p",{children:"Passwords not Matched"}),(0,b.jsxs)("div",{style:{width:"80%",display:"flex",justifyContent:"space-around",marginTop:"20px"},children:[(0,b.jsx)(f.Z,{onClick:e.reset,variant:"contained",color:"reset",children:"Reset"}),(0,b.jsx)(f.Z,{onClick:e.onSubmit,variant:"contained",color:"success",children:"Update Password"})]}),(0,b.jsx)(f.Z,{onClick:function(){return e.setState({alreadyRegistered:!0})},children:"Click me to signin page"})]})},e.verifyotp=function(){var t=(0,n.Z)((0,s.Z)().mark((function t(r){var n,a;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.state.enrollmentNo,a={url:"".concat("https://20.235.87.10/capis/","account/verify-reset-password/"),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:{enrollment:n,otp:r}},t.next=5,(0,Z.Z)(a);case 5:200===t.sent.status&&e.setState({backErr:!0,backErrMsg:"Password Changed Successfully. Please login to Continue",severity:"success"},e.navigateToSignIn),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),403===t.t0.response.request.status?e.setState({backErr:!0,backErrMsg:t.t0.response.data.detail.toUpperCase(),severity:"error"}):e.setState({backErr:!0,backErrMsg:t.t0.msg});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClose=function(){e.setState({backErr:!1})},e}return(0,o.Z)(r,[{key:"render",value:function(){var e=this.state,t=e.otpSent,r=e.otpVerifiedSuccessfully,s=e.backErr,n=e.backErrMsg,a=e.severity,o=e.isLoading,i=e.alreadyRegistered;return(0,b.jsxs)(b.Fragment,{children:[i?(0,b.jsx)(d.Fg,{to:"/student/signin"}):null,(0,b.jsx)(x.Z,{theme:j,children:(0,b.jsxs)("div",{className:"SignupMainPage",children:[(0,b.jsx)("img",{style:{height:"150px"},className:"universityLogo",src:v,alt:"logo"}),(0,b.jsx)("img",{className:"registrationImage",src:w,alt:"regImage"}),t?(0,b.jsx)(y.Z,{resendOtp:this.callForOtp,verifyotp:this.verifyotp}):this.passwordResetForm(),r?(0,b.jsx)(d.Fg,{to:"/student/signin"}):null]})}),(0,b.jsx)(g.Z,{open:s,autoHideDuration:6e3,onClose:this.handleClose,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,b.jsx)(m.Z,{onClose:this.handleClose,severity:a,sx:{width:"100%"},children:n})}),(0,b.jsx)(S.Z,{isLoading:o})]})}}]),r}(l.Component),E=C},5627:function(e,t,r){var s=r(5671),n=r(3144),a=r(136),o=r(7277),i=r(2791),c=r(5112),l=r(6580),d=r(184),u=function(e){(0,a.Z)(r,e);var t=(0,o.Z)(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r,[{key:"render",value:function(){var e=this.props.isLoading;return(0,d.jsx)(c.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:e,children:(0,d.jsx)(l.Z,{color:"inherit"})})}}]),r}(i.Component);t.Z=u},4056:function(e,t,r){var s=r(885),n=r(1413),a=r(6971),o=r.n(a),i=r(7205),c=r(2791),l=r(184),d=function(e){return(0,l.jsx)(i.Z,(0,n.Z)((0,n.Z)({},e),{},{size:"small",children:"Resend"}))},u=function(e){return(0,l.jsxs)("span",{children:[e," seconds remaining"]})};t.Z=function(e){var t=(0,c.useState)(""),r=(0,s.Z)(t,2),n=r[0],p=r[1];return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"300px",justifyContent:"center",alignItems:"center",backgroundImage:"linear-gradient(to right,#86BFF0,#52FFFF)",padding:"50px",borderRadius:"10px"},children:[(0,l.jsx)(o(),{value:n,onChange:p,autoFocus:!0,OTPLength:4,otpType:"number",disabled:!1}),(0,l.jsx)(a.ResendOTP,{maxTime:"40",renderButton:d,renderTime:u,style:{marginTop:"10px",justifyContent:"space-around",alignItems:"center"},onResendClick:function(){var t=e.resendOtp;t()}}),(0,l.jsx)(i.Z,{variant:"Contained",style:{backgroundColor:"blue",color:"white",margin:"10px"},onClick:function(){(0,e.verifyotp)(n)},children:"Submit otp"})]})}},8422:function(e,t,r){e.exports=r.p+"static/media/logopng.a02a0d7b0f58e02e446c.png"},1677:function(e,t,r){e.exports=r.p+"static/media/registrationt.feec7b6de1ca8b8c1f81.png"}}]);
//# sourceMappingURL=516.0a1caa96.chunk.js.map