"use strict";(self.webpackChunkodrequest=self.webpackChunkodrequest||[]).push([[916],{4916:function(e,t,s){s.r(t),s.d(t,{default:function(){return C}});var r=s(4165),n=s(5861),a=s(5671),o=s(3144),i=s(136),l=s(7277),d=s(2791),c=s(7689),u=s(7205),p=s(6015),g=s(5017),h=s(1898),f=s(508),x=s(4420),w=s(8254),v=s(3811),m=s(1647),Z=s(1508),S=s(5627),b=s(8820),k=s(8329),j=s(8422),y=s(2388),E=s(184),L=function(e){(0,i.Z)(s,e);var t=(0,l.Z)(s);function s(){var e;(0,a.Z)(this,s);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={enrollNo:"",password:"",isLoading:!1,backErr:!1,backErrMsg:"",passwordVisable:!1,validUser:!1,forgotPassword:!1,isStudent:!1},e.componentDidMount=function(){e.isUserLogedIn()},e.isUserLogedIn=function(){void 0===k.Z.get("authToken")?e.setState({validUser:!1}):e.setState({validUser:!0})},e.verifyUser=(0,n.Z)((0,r.Z)().mark((function t(){var s,n,a,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.state,s.enrollNo,n=s.password,e.setState({isLoading:!0}),t.prev=2,a={url:"".concat("https://20.235.87.10/capis/","staff/login/"),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:{username:"SUPERADMIN",password:n}},t.next=6,(0,y.Z)(a);case 6:"OK"===(o=t.sent).statusText&&(k.Z.set("staffAuthToken",o.data.auth_token,{expires:1}),k.Z.set("name",o.data.username,{expires:1}),k.Z.set("role",o.data.role,{expires:1}),e.setState({isLoading:!1,validUser:!0})),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),"Network Error"===t.t0.message&&e.setState({isLoading:!1,backErr:!0,backErrMsg:"Something went wrong Please try again"}),500===t.t0.response.status&&e.setState({isLoading:!1,backErr:!0,backErrMsg:"Unregistered user... Contact admin for login"}),403===t.t0.response.status?e.setState({isLoading:!1,backErr:!0,backErrMsg:"Incorrect Password... Please try again"}):e.setState({isLoading:!1,backErr:!0,backErrMsg:t.t0.message});case 15:case"end":return t.stop()}}),t,null,[[2,10]])}))),e.onLogin=function(){var t=e.state,s=t.enrollNo,r=t.password;""===s&&e.setState({enrollNoErr:!0}),""!==s&&e.setState({enrollNoErr:!1}),""===r&&e.setState({passwordErr:!0}),""!==r&&e.setState({passwordErr:!1}),""!==s&&""!==r&&e.verifyUser()},e.toggleForgotpassword=function(){e.setState({forgotPassword:!0})},e.role=function(){e.setState({isStudent:!0})},e.signInView=function(){var t=e.state,s=t.enrollNo,r=t.enrollNoErr,n=t.password,a=t.passwordErr,o=t.passwordVisable,i=t.forgotPassword,l=t.isStudent;return(0,E.jsxs)(E.Fragment,{children:[i?(0,E.jsx)(c.Fg,{to:"/student/forgotPassword"}):null,l?(0,E.jsx)(c.Fg,{to:"/student/signin"}):null,(0,E.jsxs)("div",{className:"AuthPageSignin",children:[(0,E.jsx)("img",{style:{height:"150px"},className:"authLogo",alt:"Logo",src:j}),(0,E.jsx)(u.Z,{style:{position:"absolute",right:"15px",top:"15px",fontSize:"18px",fontWeight:"bold"},onClick:e.role,children:"Student Login"}),(0,E.jsxs)(p.Z,{className:"AuthpageSigninForm",children:[(0,E.jsx)("h1",{children:"Employee Log in"}),(0,E.jsx)(g.Z,{required:!0,id:"employee-login-username",label:"User Name",style:{margin:"30px 0 0 0"},onChange:function(t){return e.setState({enrollNo:t.target.value.toUpperCase()})},value:s,error:r,autofill:"false",fullWidth:!0}),(0,E.jsxs)(h.Z,{style:{margin:"30px 0 0 0"},variant:"outlined",children:[(0,E.jsx)(f.Z,{htmlFor:"outlined-adornment-password",children:"Password"}),(0,E.jsx)(x.Z,{id:"outlined-adornment-password",value:n,error:a,type:o?"text":"password",onChange:function(t){return e.setState({password:t.target.value})},endAdornment:(0,E.jsx)(w.Z,{position:"end",children:(0,E.jsx)(v.Z,{"aria-label":"toggle password visibility",onClick:function(){e.setState((function(e){return{passwordVisable:!e.passwordVisable}}))},edge:"end",children:o?(0,E.jsx)(b.w8I,{style:{fontSize:"28px"}}):(0,E.jsx)(b.p3W,{style:{fontSize:"28px"}})})}),label:"Password"})]}),(0,E.jsx)("div",{className:"authPageBtnContainer",children:(0,E.jsx)(u.Z,{variant:"contained",onClick:e.onLogin,style:{width:"30%",marginTop:"20px"},children:"Login"})})]})]})]})},e.handleClose=function(){e.setState({backErr:!1})},e}return(0,o.Z)(s,[{key:"render",value:function(){var e=this.state,t=e.isLoading,s=e.backErr,r=e.backErrMsg,n=e.validUser;return(0,E.jsxs)(E.Fragment,{children:[this.signInView(),(0,E.jsx)(S.Z,{isLoading:t}),(0,E.jsx)(m.Z,{open:s,autoHideDuration:6e3,onClose:this.handleClose,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,E.jsx)(Z.Z,{onClose:this.handleClose,severity:"error",sx:{width:"100%"},children:r})}),n?(0,E.jsx)(c.Fg,{to:"/approvalsection/dashboard"}):null]})}}]),s}(d.Component),C=L},5627:function(e,t,s){var r=s(5671),n=s(3144),a=s(136),o=s(7277),i=s(2791),l=s(5112),d=s(6580),c=s(184),u=function(e){(0,a.Z)(s,e);var t=(0,o.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,n.Z)(s,[{key:"render",value:function(){var e=this.props.isLoading;return(0,c.jsx)(l.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:e,children:(0,c.jsx)(d.Z,{color:"inherit"})})}}]),s}(i.Component);t.Z=u},8422:function(e,t,s){e.exports=s.p+"static/media/logopng.a02a0d7b0f58e02e446c.png"}}]);
//# sourceMappingURL=916.cd6234bd.chunk.js.map