"use strict";(self.webpackChunkodrequest=self.webpackChunkodrequest||[]).push([[916],{4916:function(e,t,r){r.r(t),r.d(t,{default:function(){return C}});var s=r(4165),n=r(5861),o=r(5671),a=r(3144),i=r(136),l=r(7277),d=r(2791),c=r(7689),u=r(7205),g=r(6015),p=r(5017),h=r(1898),f=r(508),x=r(4420),w=r(8254),v=r(3811),m=r(1647),S=r(1508),Z=r(5627),b=r(8820),k=r(8329),j=r(8422),y=r(2388),E=r(184),L=function(e){(0,i.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;(0,o.Z)(this,r);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={enrollNo:"",password:"",isLoading:!1,backErr:!1,backErrMsg:"",passwordVisable:!1,validUser:!1,forgotPassword:!1,isStudent:!1},e.componentDidMount=function(){e.isUserLogedIn()},e.isUserLogedIn=function(){void 0===k.Z.get("authToken")?e.setState({validUser:!1}):e.setState({validUser:!0})},e.verifyUser=(0,n.Z)((0,s.Z)().mark((function t(){var r,n,o,a,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,n=r.enrollNo,o=r.password,e.setState({isLoading:!0}),t.prev=2,a={url:"".concat("https://20.235.87.10/capis/","staff/login/"),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:{enrollment:n,password:o}},t.next=6,(0,y.Z)(a);case 6:"OK"===(i=t.sent).statusText&&(k.Z.set("staffAuthToken",i.data.auth_token,{expires:1}),e.setState({isLoading:!1,validUser:!0})),console.log(i),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(2),"Network Error"===t.t0.message&&e.setState({isLoading:!1,backErr:!0,backErrMsg:"Something went wrong Please try again"}),500===t.t0.response.status&&e.setState({isLoading:!1,backErr:!0,backErrMsg:"Unregistered user... Contact admin for login"}),403===t.t0.response.status?e.setState({isLoading:!1,backErr:!0,backErrMsg:"Incorrect Password... Please try again"}):e.setState({isLoading:!1,backErr:!0,backErrMsg:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[2,11]])}))),e.onLogin=function(){var t=e.state,r=t.enrollNo,s=t.password;""===r&&e.setState({enrollNoErr:!0}),""!==r&&e.setState({enrollNoErr:!1}),""===s&&e.setState({passwordErr:!0}),""!==s&&e.setState({passwordErr:!1}),""!==r&&""!==s&&e.verifyUser()},e.toggleForgotpassword=function(){e.setState({forgotPassword:!0})},e.role=function(){e.setState({isStudent:!0})},e.signInView=function(){var t=e.state,r=t.enrollNo,s=t.enrollNoErr,n=t.password,o=t.passwordErr,a=t.passwordVisable,i=t.forgotPassword,l=t.isStudent;return(0,E.jsxs)(E.Fragment,{children:[i?(0,E.jsx)(c.Fg,{to:"/student/forgotPassword"}):null,l?(0,E.jsx)(c.Fg,{to:"/student/signin"}):null,(0,E.jsxs)("div",{className:"AuthPageSignin",children:[(0,E.jsx)("img",{className:"authLogo",alt:"Logo",src:j}),(0,E.jsx)(u.Z,{variant:"contained",style:{position:"absolute",right:"15px",top:"15px",fontSize:"18px",fontWeight:"bold"},onClick:e.role,children:"Student Login"}),(0,E.jsxs)(g.Z,{className:"AuthpageSigninForm",children:[(0,E.jsx)("h1",{children:"Employee Log in"}),(0,E.jsx)(p.Z,{required:!0,id:"employee-login-username",label:"User Name",style:{margin:"30px 0 0 0"},onChange:function(t){return e.setState({enrollNo:t.target.value.toUpperCase()})},value:r,error:s,autofill:"false",fullWidth:!0}),(0,E.jsxs)(h.Z,{style:{margin:"30px 0 0 0"},variant:"outlined",children:[(0,E.jsx)(f.Z,{htmlFor:"outlined-adornment-password",children:"Password"}),(0,E.jsx)(x.Z,{id:"outlined-adornment-password",value:n,error:o,type:a?"text":"password",onChange:function(t){return e.setState({password:t.target.value})},endAdornment:(0,E.jsx)(w.Z,{position:"end",children:(0,E.jsx)(v.Z,{"aria-label":"toggle password visibility",onClick:function(){e.setState((function(e){return{passwordVisable:!e.passwordVisable}}))},edge:"end",children:a?(0,E.jsx)(b.w8I,{style:{fontSize:"28px"}}):(0,E.jsx)(b.p3W,{style:{fontSize:"28px"}})})}),label:"Password"})]}),(0,E.jsx)("div",{className:"authPageBtnContainer",children:(0,E.jsx)(u.Z,{variant:"contained",onClick:e.onLogin,style:{width:"30%",marginTop:"20px"},children:"Login"})})]})]})]})},e.handleClose=function(){e.setState({backErr:!1})},e}return(0,a.Z)(r,[{key:"render",value:function(){var e=this.state,t=e.isLoading,r=e.backErr,s=e.backErrMsg,n=e.validUser;return(0,E.jsxs)(E.Fragment,{children:[this.signInView(),(0,E.jsx)(Z.Z,{isLoading:t}),(0,E.jsx)(m.Z,{open:r,autoHideDuration:6e3,onClose:this.handleClose,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,E.jsx)(S.Z,{onClose:this.handleClose,severity:"error",sx:{width:"100%"},children:s})}),n?(0,E.jsx)(c.Fg,{to:"/approvalsection/dashboard"}):null]})}}]),r}(d.Component),C=L},5627:function(e,t,r){var s=r(5671),n=r(3144),o=r(136),a=r(7277),i=r(2791),l=r(5112),d=r(6580),c=r(184),u=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r,[{key:"render",value:function(){var e=this.props.isLoading;return(0,c.jsx)(l.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:e,children:(0,c.jsx)(d.Z,{color:"inherit"})})}}]),r}(i.Component);t.Z=u},8422:function(e,t,r){e.exports=r.p+"static/media/logopng.18cff690cf784ed137b4.png"}}]);
//# sourceMappingURL=916.3886aafa.chunk.js.map